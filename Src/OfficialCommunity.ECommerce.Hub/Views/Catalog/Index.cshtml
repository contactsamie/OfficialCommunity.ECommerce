@using OfficialCommunity.ECommerce.Hub.Domains.Editable
@{
    ViewData["Title"] = "catalogs";
    ViewData["Banner"] = null;
}

<div class="content-frame">
    @(Html.Kendo().Grid<EditableCatalogTableEntity>()
          .Name("grid")
          .BindTo((IEnumerable<EditableCatalogTableEntity>)ViewBag.Catalogs)
          .Columns(columns =>
          {
              columns.Bound(c => c.Deleted)
                  .Title("deleted")
                  .Width(75)
                  .Filterable(false)
                  .HtmlAttributes(new { style = "text-align:center;" })
                  .ClientTemplate(
                      "# if (Deleted == true) { #" +
                      "<i class='fa fa-check-square-o fa-2x'>" +
                      "# } else { #" +
                      "<i class='fa fa-square-o fa-2x'>" +
                      "# } #"
                  );
              columns.Bound(p => p.Name);
              columns.Bound(p => p.ProviderName);
              columns.Command(command => { command.Edit(); command.Destroy(); }).Width(250);
          })
          .Pageable(pager => pager
              .Input(true)
              .Numeric(true)
              .Info(true)
              .PreviousNext(true)
              .Refresh(true)
              .PageSizes(new[] { 25, 50, 100 })
          )
          .Scrollable()
          .Sortable()
          .Navigatable()
          .Groupable()
          .Filterable(ftb => ftb.Mode(GridFilterMode.Row))
          .ToolBar(toolbar => toolbar.Create())
          .Editable(editable => editable.Mode(GridEditMode.PopUp))
          .Deferred()
          )
</div>

<script type="text/javascript">
        function error_handler(e) {
            if (e.errors) {
                var message = "Errors:\n";
                $.each(e.errors, function (key, value) {
                    if ('errors' in value) {
                        $.each(value.errors, function () {
                            message += this + "\n";
                        });
                    }
                });
                alert(message);
            }
        }
</script>